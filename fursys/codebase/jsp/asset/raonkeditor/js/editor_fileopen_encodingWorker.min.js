self.addEventListener("message",function(b){b=b.data;if(b.init){var f=!1;FileReaderSync&&(f=!0);postMessage({result:f})}else try{var c;c=b.mozSlice?b.mozSlice(0,4):b.webkitSlice?b.webkitSlice(0,4):b.slice(0,4);var m=new FileReaderSync,n=m.readAsArrayBuffer(c),a=new Uint8Array(n),m=n=void 0,g=!1;c="";if(239==(a[0]&255)&&187==(a[1]&255)&&191==(a[2]&255))c="UTF-8",g=!0;else if(254==(a[0]&255)&&255==(a[1]&255))c="UTF-16BE",g=!0;else if(255==(a[0]&255)&&254==(a[1]&255))c="UTF-16LE",g=!0;else if(0==(a[0]&
255)&&0==(a[1]&255)&&254==(a[0]&255)&&255==(a[1]&255))c="UTF-32BE",g=!0;else if(255==(a[0]&255)&&254==(a[1]&255)&&0==(a[0]&255)&&0==(a[1]&255))c="UTF-32LE",g=!0;else{a=!0;if(5242880>=b.size){for(var k=new FileReaderSync,h=k.readAsArrayBuffer(b),f=new Uint8Array(h),k=h=void 0,d,e,k=!0,h=d=0;h<f.length;h++)if(e=f[h]&255,0!=(e&128)&&(k=!1),0==d){if(128<=e){do e=e<<1&255,d++;while(0!=(e&128));d--;if(0==d){a=!1;break}}}else{if(128!=(e&192)){a=!1;break}d--}f=void 0;0<d&&(a=!1);k&&(a=!1)}c=a?"UTF-8":"EUC-KR"}var l=
new FileReader;l.onload=function(a){postMessage({result:this.result,hasBom:g});l=void 0};l.readAsText(b,c)}catch(p){postMessage({result:"[KEditorError] "+p.message,hasBom:!1})}},!1);
